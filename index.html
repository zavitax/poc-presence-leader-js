<!DOCTYPE html>
<html>
    <body>
        <script>
            function frame() {
                console.log('add frame');

                const e = document.createElement('iframe');
                e.width = "30%";
                e.height = "100";
                e.src = "frame.html";
                document.body.appendChild(e);

                return () => {
                    console.log('remove frame');

                    document.body.removeChild(e);
                    e.src = "about:blank";
                };
            }

            const frames = [];
            const chance_to_add = 0.9;
            const max_frames = 3 * 5;

            frames.push(frame());
            frames.push(frame());
            frames.push(frame());
            frames.push(frame());
            frames.push(frame());
            frames.push(frame());
            frames.push(frame());
            frames.push(frame());
            frames.push(frame());

            setInterval(() => {
                if (Math.random() < chance_to_add && frames.length < max_frames) {
                    frames.push(frame());
                } else {
                    if (frames.length === 0) return;

                    const index = Math.floor(frames.length * Math.random());

                    const remove = frames[index];

                    frames.splice(index, 1);

                    remove();
                }
            }, 1000 * 60);
        </script>
    </body>
</html>